$(document).ready(function(){var a,e=$("#amount").val();a=jQuery(".endereco").attr("data-endereco"),$.ajax({url:a+"_assets/scripts/pagamento.php",type:"POST",dataType:"json",success:function(a){PagSeguroDirectPayment.setSessionId(a.id)},complete:function(a){PagSeguroDirectPayment.getPaymentMethods({amount:e,success:function(a){$(".meio-pag").append("<div>Cartão de Crédito</div>"),$.each(a.paymentMethods.CREDIT_CARD.options,function(a,e){$(".meio-pag").append("<span class='img-band'><img src='https://stc.pagseguro.uol.com.br"+e.images.SMALL.path+"'></span>")}),$(".meio-pag").append("<div>Boleto</div>"),$(".meio-pag").append("<span class='img-band'><img src='https://stc.pagseguro.uol.com.br"+a.paymentMethods.BOLETO.options.BOLETO.images.SMALL.path+"'><span>"),$(".meio-pag").append("<div>Débito Online</div>"),$.each(a.paymentMethods.ONLINE_DEBIT.options,function(a,e){$(".meio-pag").append("<span class='img-band'><img src='https://stc.pagseguro.uol.com.br"+e.images.SMALL.path+"'></span>")})},error:function(a){},complete:function(a){}})}}),$("select").formSelect(),$(".tooltipped").tooltip(),$("#contato").mask("(00) 0 0000-0000");const t=document.querySelectorAll(".modal"),n=(M.Modal.init(t),document.querySelectorAll(".sidenav"));M.Sidenav.init(n,{edge:"right",draggable:!0}),document.querySelector("#toast");var o;o="Realize o seu pagamento em poucos cliques !",M.toast({html:o,classes:"rounded toastMobile"}),$("#numCartao").on("keyup",function(){var a=$(this).val();6==a.length&&PagSeguroDirectPayment.getBrand({cardBin:a,success:function(a){$("#msg").empty();var t,n,o=a.brand.name;$(".bandeira-cartao").html("<img src='https://stc.pagseguro.uol.com.br/public/img/payment-methods-flags/42x20/"+o+".png'>"),$("#bandeiraCartao").val(o),t=o,n=$("#noIntInstalQuantity").val(),PagSeguroDirectPayment.getInstallments({amount:e,maxInstallmentNoInterest:n,brand:t,success:function(a){$.each(a.installments,function(a,e){$.each(e,function(a,e){var t=e.installmentAmount.toFixed(2).replace(".",",");$("#qntParcelas").show().append("<option value='"+e.quantity+"' data-parcelas='"+e.installmentAmount+"'>"+e.quantity+" parcelas de R$ "+t+"</option>")})})},error:function(a){},complete:function(a){}})},error:function(a){$(".bandeira-cartao").empty(),$("#msg").html("Cartão inválido")}})}),$("#qntParcelas").change(function(){$("#valorParcelas").val($("#qntParcelas").find(":selected").attr("data-parcelas"))}),$("#formPagamento").on("submit",function(a){a.preventDefault(),PagSeguroDirectPayment.createCardToken({cardNumber:$("#numCartao").val(),brand:$("#bandeiraCartao").val(),cvv:$("#cvvCartao").val(),expirationMonth:$("#mesValidade").val(),expirationYear:$("#anoValidade").val(),success:function(a){$("#tokenCartao").val(a.card.token)},error:function(a){},complete:function(a){PagSeguroDirectPayment.onSenderHashReady(function(a){if("error"==a.status)return console.log(a.message),!1;$("#hashCartao").val(a.senderHash);var e=$("#formPagamento").serialize();console.log(e);var t=jQuery(".endereco").attr("data-endereco");console.log(t),$.ajax({method:"POST",url:t+"proc_pag.php",data:e,dataType:"json",success:function(a){console.log("Sucesso "+JSON.stringify(a))},error:function(a){console.log("Erro")}})})}})})});